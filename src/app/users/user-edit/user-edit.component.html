<ng-container *ngIf="user">
  <form class="profile profile-form" (ngSubmit)="updateProfile()">

    <h1 class="profile__title">基本情報</h1>
    <div class="profile__main">
      <div class="data-list">
        <div class="data">
          <i class="data__icon fa fa-fw fa-id-card"></i>
          <mat-input-container class="data__input">
            <input
              matInput
              type="text"
              id="userId"
              name="userId"
              [(ngModel)]="user.userId"
              placeholder="ユーザID (変更不可)"
              disabled
              >
          </mat-input-container>
        </div>
        <div class="data">

          <i class="data__icon fa fa-fw fa-shield"></i>
          <mat-input-container class="data__input">
            <input
              matInput
              type="text"
              id="isAdmin"
              name="isAdmin"
              value="{{user.isAdmin ? '管理者' : '一般ユーザ'}}"
              placeholder="権限 (変更不可)"
              disabled
              >
          </mat-input-container>
        </div>
      </div>
      <div class="data-list">
        <div class="data">
          <i class="data__icon fa fa-fw fa-user" #labelUserName [class.data__icon_focused]="labelUserName.focused"></i>

          <mat-input-container class="data__input">
            <input
              matInput
              type="text"
              id="userName"
              name="userName"
              (focus)="labelUserName.focused = true"
              (blur)="labelUserName.focused = false"
              [(ngModel)]="user.userName"
              placeholder="ユーザ名"
              >
          </mat-input-container>
        </div>
      </div>

      <div class="data">
        <i class="data__icon material-icons fw" #labelEmail [class.data__icon_focused]="labelEmail.focused">email</i>
        <mat-input-container class="data__input">
          <input
            matInput
            type="text"
            id="email"
            name="email"
            (focus)="labelEmail.focused = true"
            (blur)="labelEmail.focused = false"
            [(ngModel)]="user.email"
            placeholder="メール"
            >
        </mat-input-container>
      </div>
      <div class="data">
        <i class="data__icon fa fa-fw fa-flag" #labelBlogTitle [class.data__icon_focused]="labelBlogTitle.focused"></i>
        <mat-input-container class="data__input">
          <input
            matInput
            type="text"
            id="blogTitle"
            name="blogTitle"
            (focus)="labelBlogTitle.focused = true"
            (blur)="labelBlogTitle.focused = false"
            [(ngModel)]="user.blogTitle"
            placeholder="ブログタイトル"
            >
        </mat-input-container>
      </div>
      <div class="data">
        <i class="data__icon material-icons fw" #labelUserDescription #labelUserDescription [class.data__icon_focused]="labelUserDescription.focused">description</i>
        <mat-input-container class="data__input">
          <textarea
            matInput
            type="text"
            id="userDescription"
            class="data__input__textarea"
            name="userDescription"
            (focus)="labelUserDescription.focused = true"
            (blur)="labelUserDescription.focused = false"
            [(ngModel)]="user.userDescription"
            placeholder="自己紹介"
            ></textarea>
        </mat-input-container>
      </div>
    </div>

    <h1 class="profile__title">アバター</h1>
    <div class="profile__main">
      <div class="data_image">
        <button
          type="button"
          mat-raised-button
          (click)="iconFileInput.click()">画像変更</button>
        <input
          hidden
          #iconFileInput
          type="file"
          accept="image/*"
          id="icon"
          name="icon"
          (change)="onChangeIconFile($event)"
          >
        <img class="avator-icon" src="data:image/png;base64,{{user.icon}}">
      </div>
    </div>

    <div class="profile__operation">
      <button
        mat-raised-button
        color="primary"
        type="submit"
        id="update-profile-btn">
        <i class="fa fa-fw fa-upload"></i>  更新
      </button>
    </div>
  </form>
</ng-container>